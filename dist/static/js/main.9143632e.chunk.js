(this.webpackJsonpinstadev=this.webpackJsonpinstadev||[]).push([[0],{117:function(e,t){},120:function(e,t,a){},121:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(52),s=a.n(c),i=a(12),o=a(5),l=a(53),p=a(4),u=a.n(p),m=a(8),h=a(9),d=a(10),f=a(11),g=a(13),v=a(54),E=a.n(v).a.create({baseURL:"https://api-instadev.herokuapp.com",timeout:2e4}),b=(a(87),function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={image:null,author:"",place:"",hashtag:"",description:""},e.handleSubmit=function(){var t=Object(m.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),(n=new FormData).append("image",e.state.image),n.append("author",e.state.author),n.append("place",e.state.place),n.append("description",e.state.description),n.append("hashtag",e.state.hashtag),t.next=9,E.post("/posts",n);case 9:e.props.history.push("/");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleImageChange=function(t){e.setState({image:t.target.files[0]})},e.handleChange=function(t){e.setState(Object(l.a)({},t.target.name,t.target.value))},e}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{id:"new-post",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"file",onChange:this.handleImageChange}),r.a.createElement("input",{type:"text",name:"author",placeholder:"Autor",onChange:this.handleChange,value:this.state.author}),r.a.createElement("input",{type:"text",name:"place",placeholder:"Local",onChange:this.handleChange,value:this.state.place}),r.a.createElement("input",{type:"text",name:"description",placeholder:"Descri\xe7\xe3o",onChange:this.handleChange,value:this.state.description}),r.a.createElement("input",{type:"text",name:"hashtag",placeholder:"Hashtag",onChange:this.handleChange,value:this.state.hashtag}),r.a.createElement("button",{type:"submit"},"Enviar"))}}]),a}(n.Component)),k=a(64),y=a(55),x=a.n(y),j=a(56),O=a.n(j),C=a(57),w=a.n(C),S=a(58),N=a.n(S),D=a(59),A=a.n(D),I=(a(120),function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleLike=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.put("/posts/".concat(t,"/likes"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("article",{className:"post"},r.a.createElement("header",null,r.a.createElement("div",{className:"info"},r.a.createElement("span",null,this.props.post.author),r.a.createElement("span",{className:"place"},this.props.post.place)),r.a.createElement("img",{src:O.a,alt:"Mais"})),r.a.createElement("img",{className:"image",src:this.props.post.image.url,alt:this.props.post.image.name}),r.a.createElement("footer",null,r.a.createElement("div",{className:"actions"},r.a.createElement("img",{className:"like",src:w.a,alt:"like",onClick:function(t){return e.handleLike(e.props.post._id)}}),r.a.createElement("img",{src:A.a,alt:"comment"}),r.a.createElement("img",{src:N.a,alt:"send"})),r.a.createElement("strong",null,this.props.post.likes," curtidas"),r.a.createElement("p",{className:"desc"},this.props.post.description,r.a.createElement("span",{className:"hashtag"},this.props.post.hashtag))))}}]),a}(n.Component)),L=(a(121),function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={feed:[]},e.registerToSocket=function(t){var a=x()("https://api-instadev.herokuapp.com");a.on("post",(function(t){e.setState({feed:[t].concat(Object(k.a)(e.state.feed))})})),a.on("like",(function(t){e.setState({feed:e.state.feed.map((function(e){return e._id===t._id?t:e}))})}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.registerToSocket(),e.next=3,E.get("/posts");case 3:t=e.sent,this.setState({feed:t.data});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("section",{id:"post-list"},this.state.feed.map((function(e){return r.a.createElement(I,{key:e._id,post:e})})))}}]),a}(n.Component)),_=function(e){return r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/",exact:!0,component:L}),r.a.createElement(o.a,{path:"/new",component:b}))},M=(a(126),a(62)),J=a.n(M),T=a(63),B=a.n(T),F=function(e){return r.a.createElement("header",{id:"main-header"},r.a.createElement("div",{className:"header-content"},r.a.createElement(i.b,{to:"/"},r.a.createElement("img",{src:J.a,alt:"InstaDev"})),r.a.createElement(i.b,{to:"/new"},r.a.createElement("img",{src:B.a,alt:"Enviar publica\xe7\xe3o"}))))};a(127);var H=function(){return r.a.createElement(i.a,null,r.a.createElement(F,null),r.a.createElement(_,null))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root"))},56:function(e,t,a){e.exports=a.p+"static/media/more.6477aa76.svg"},57:function(e,t,a){e.exports=a.p+"static/media/like.416be3a7.svg"},58:function(e,t,a){e.exports=a.p+"static/media/send.d7c8392c.svg"},59:function(e,t,a){e.exports=a.p+"static/media/comment.c3bcd2e1.svg"},62:function(e,t,a){e.exports=a.p+"static/media/logo.2f13f116.svg"},63:function(e,t,a){e.exports=a.p+"static/media/camera.49d77fc8.svg"},65:function(e,t,a){e.exports=a(128)},87:function(e,t,a){}},[[65,1,2]]]);
//# sourceMappingURL=main.9143632e.chunk.js.map